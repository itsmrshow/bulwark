services:
  bulwark:
    build: .
    image: bulwark:dev
    container_name: bulwark
    restart: unless-stopped
    ports:
    - 8085:8080
    env_file:
    - .env
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock
    - /docker_data:/docker_data:ro
    - bulwark_state:/var/lib/bulwark
    - bulwark_data:/data
    extra_hosts:
    - host.docker.internal:host-gateway
    labels:
    - bulwark.enabled=true
    - bulwark.policy=safe
    - bulwark.tier=stateless
    - bulwark.probe.type=stability
    - bulwark.probe.stability_sec=15
volumes:
  bulwark_state:
    driver: local
  bulwark_data:
    driver: local
